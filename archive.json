{
  "magic": "E!vIA5L86J2I",
  "timestamp": "2025-03-04T00:40:22.162350+00:00",
  "repo": "martinthomson/dap-bulk",
  "labels": [
    {
      "name": "bug",
      "description": "Something isn't working",
      "color": "d73a4a"
    },
    {
      "name": "documentation",
      "description": "Improvements or additions to documentation",
      "color": "0075ca"
    },
    {
      "name": "duplicate",
      "description": "This issue or pull request already exists",
      "color": "cfd3d7"
    },
    {
      "name": "enhancement",
      "description": "New feature or request",
      "color": "a2eeef"
    },
    {
      "name": "good first issue",
      "description": "Good for newcomers",
      "color": "7057ff"
    },
    {
      "name": "help wanted",
      "description": "Extra attention is needed",
      "color": "008672"
    },
    {
      "name": "invalid",
      "description": "This doesn't seem right",
      "color": "e4e669"
    },
    {
      "name": "question",
      "description": "Further information is requested",
      "color": "d876e3"
    },
    {
      "name": "wontfix",
      "description": "This will not be worked on",
      "color": "ffffff"
    }
  ],
  "issues": [
    {
      "number": 1,
      "id": "I_kwDONCEHjs6axTLv",
      "title": "Remove the extensions field from reports",
      "url": "https://github.com/martinthomson/dap-bulk/issues/1",
      "state": "OPEN",
      "author": "martinthomson",
      "authorAssociation": "OWNER",
      "assignees": [],
      "labels": [],
      "body": "There's a note in the draft about this.\r\n\r\nThis saves two bytes per report (not a lot), but it simplifies things a fair bit.",
      "createdAt": "2024-10-18T06:56:25Z",
      "updatedAt": "2024-10-18T06:56:26Z",
      "closedAt": null,
      "comments": []
    },
    {
      "number": 2,
      "id": "I_kwDONCEHjs6bX6yS",
      "title": "How are common extensions applied to reports during aggregation?",
      "url": "https://github.com/martinthomson/dap-bulk/issues/2",
      "state": "OPEN",
      "author": "cjpatton",
      "authorAssociation": "NONE",
      "assignees": [],
      "labels": [],
      "body": "This draft saves communication during upload interaction between Clients (well, the HTTP client uploading many reports on behalf of the Clients) and the Leader by not re-transmitting the common extensions multiple times. I suspect it would be desirable avoid this during aggregation as well (i.e., the Leader->Helper interaction).\r\n\r\nWhich leads me to my question: how does the Leader convey the common extensions to the Helper? Does it just add them to each `ReportMetadata` in each aggregation job? Do we want to try and avoid this?\r\n\r\nInstead of adding an extension point to `ReportMetadata`, we could add it to the `AggregationJobInitReq`, thus sending it only once per aggregation job rather than once per report. We would just need to figure out how to incorporate this into the AAD for HPKE encryption.\r\n\r\n",
      "createdAt": "2024-10-22T23:27:56Z",
      "updatedAt": "2024-10-22T23:42:59Z",
      "closedAt": null,
      "comments": [
        {
          "author": "martinthomson",
          "authorAssociation": "OWNER",
          "body": "I hadn't considered changes to the internal protocol between aggregators.  There are some plausible reasons why you might not want to force batches to have consistent metadata though.\r\n\r\nOne potential approach for batching uses time so that helpers are able to more efficiently check for duplicates (we've talked about that in replay design).  If you force batching to use a consistent set of extensions, then you might end up degrading the helper's ability to delineate cleanly across a certain timestamp.\r\n\r\nThat could also be exactly what you want, because the replay protection is also delineated along the lines of those extensions (as many of the extensions in the [dap-dp-ext](https://github.com/martinthomson/dap-dp-ext) draft are design to enable).  But to force that might lead to suboptimal outcomes for those deployments.\r\n\r\nPerhaps the right thing to do is take a more comprehensive look at the anti-replay design and try to figure out where the cuts are.  Then the right way to optimize might become apparent.",
          "createdAt": "2024-10-22T23:42:59Z",
          "updatedAt": "2024-10-22T23:42:59Z"
        }
      ]
    },
    {
      "number": 4,
      "id": "I_kwDONCEHjs6sJvo-",
      "title": "Use existing upload endpoint with new content type",
      "url": "https://github.com/martinthomson/dap-bulk/issues/4",
      "state": "OPEN",
      "author": "tgeoghegan",
      "authorAssociation": "NONE",
      "assignees": [],
      "labels": [],
      "body": "[Section 3](https://martinthomson.github.io/dap-bulk/draft-thomson-ppm-dap-bulk.html#section-3) and 4 stipulates that bulk uploads should use a new HTTP request path `{leader}/tasks/{task-id}/reports/bulk` with content type \"application/dap-bulk-report\". I think we could use the existing upload path with the new content type, and this would suffice for leader implementations to distinguish incoming messages and choose the appropriate handler.",
      "createdAt": "2025-02-28T23:31:08Z",
      "updatedAt": "2025-02-28T23:31:08Z",
      "closedAt": null,
      "comments": []
    },
    {
      "number": 5,
      "id": "I_kwDONCEHjs6sJv6y",
      "title": "Section 4: Use of \"header\" is confusing",
      "url": "https://github.com/martinthomson/dap-bulk/issues/5",
      "state": "OPEN",
      "author": "tgeoghegan",
      "authorAssociation": "NONE",
      "assignees": [],
      "labels": [],
      "body": "Section 4 reads:\n\n> The \"application/dap-bulk-report\" format contains a header that encodes extensions that are common to all reports. The header is followed by any number of reports, from which those shared fields are removed.\n\n```\nstruct {\n  Extension common_extensions<0..2^16-1>;\n  Report report[REPORT_COUNT];\n} BulkReport;\n```\n This is confusing: \"header\" implies an HTTP header, but `common_extensions` is depicted as a field of `BulkReport` which is in the HTTP request body.",
      "createdAt": "2025-02-28T23:32:28Z",
      "updatedAt": "2025-02-28T23:32:28Z",
      "closedAt": null,
      "comments": []
    }
  ],
  "pulls": [
    {
      "number": 3,
      "id": "PR_kwDONCEHjs6Izg2c",
      "title": "Remove the section 4.1: Necessary Changes to DAP Report Formats",
      "url": "https://github.com/martinthomson/dap-bulk/pull/3",
      "state": "MERGED",
      "author": "akoshelev",
      "authorAssociation": "COLLABORATOR",
      "assignees": [],
      "labels": [],
      "body": "The latest version of [DAP](https://datatracker.ietf.org/doc/html/draft-ietf-ppm-dap-13#name-upload-request) includes the `public_extensions` field.\r\n\r\nWhen I open this draft on IETF tracker, I still see it referring to dap-12 which I don't know how to fix",
      "createdAt": "2025-01-23T19:05:16Z",
      "updatedAt": "2025-02-27T02:56:10Z",
      "baseRepository": "martinthomson/dap-bulk",
      "baseRefName": "main",
      "baseRefOid": "158aa831394ee0d190168d63d9a3149226175818",
      "headRepository": "akoshelev/dap-bulk",
      "headRefName": "akoshelev-patch-1",
      "headRefOid": "3b481d5cb2c57c66e5abf7991d1b8895ec08c60a",
      "closedAt": "2025-02-27T02:56:10Z",
      "mergedAt": "2025-02-27T02:56:10Z",
      "mergedBy": "martinthomson",
      "mergeCommit": {
        "oid": "80594c49494974adefe75842c242238997fb2820"
      },
      "comments": [
        {
          "author": "akoshelev",
          "authorAssociation": "COLLABORATOR",
          "body": "@martinthomson gentle nudge",
          "createdAt": "2025-02-26T17:39:25Z",
          "updatedAt": "2025-02-26T17:39:25Z"
        }
      ],
      "reviews": [
        {
          "id": "PRR_kwDONCEHjs6dvYgQ",
          "commit": {
            "abbreviatedOid": "3b481d5"
          },
          "author": "martinthomson",
          "authorAssociation": "OWNER",
          "state": "APPROVED",
          "body": "My bad, I missed this in the flood.",
          "createdAt": "2025-02-27T02:56:01Z",
          "updatedAt": "2025-02-27T02:56:01Z",
          "comments": []
        }
      ]
    }
  ]
}